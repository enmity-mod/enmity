var Type,socket,ApplicationCommandSectionType,ApplicationCommandType,ApplicationCommandInputType,ApplicationCommandPermissionType,ApplicationCommandOptionType,InteractionTypes,Times,modules$1={Constants:{props:["Endpoints","API_HOST"]},Clipboard:{props:["setString","getString","setImage","getImage"]},Assets:{props:["registerAsset"]},Messages:{props:["receiveMessage","sendMessage"]},Clyde:{props:["createBotMessage"]},Avatars:{props:["BOT_AVATARS"]},Native:{props:["NativeModules"],export:"NativeModules"},React:{props:["createElement"]},Dispatcher:{props:["_dispatch","dispatch"]},Storage:{props:["getItem"]},Toasts:{props:["open","close"],ensure:e=>!e.openLazy&&!e.startDrag&&!e.init&&!e.openReplay&&!e.setAlwaysOnTop},Dialog:{props:["show","openLazy","close"]},Token:{props:["getToken"]},REST:{props:["getAPIBaseURL"]},Settings:{props:["watchKeys"]},Users:{props:["getCurrentUser"]},AsyncUsers:{props:["getUser","fetchProfile"]},Navigation:{props:["pushLazy"]},NavigationNative:{props:["NavigationContainer"]},NavigationStack:{props:["createStackNavigator"]},Theme:{props:["theme"]},Linking:{props:["openURL"]},StyleSheet:{props:["createThemedStyleSheet"]},ColorMap:{props:["colors","meta"]},Components:{multiple:!0,props:{Forms:["Form","FormSection"],General:["Button","Text","View"]}},Locale:{props:["Messages"]},Profiles:{props:["showUserProfile"]},Lodash:{props:["debounce","throttle"]},Logger:{name:"Logger"},Flux:{props:[["Store","connectStores"],["useStateFromStoresObject"]]},SVG:{props:["Svg"]},Scenes:{name:"getScreens",default:!1},Moment:{props:["isMoment"]}},_loop=function(e){var t=modules[e].publicModule.exports;if(!t||t===window||null===t.ihateproxies)return blacklist.push(e),"continue";if(t.SemanticColor&&t.RawColor)try{var n=window.themes?.theme??"",r=window.themes?.list??[],a=r?.find(e=>e.name===n);if(!a)return"break";if(a.colours??=a.colors,(1===a.spec||!a.spec)&&(a.theme_color_map&&(a.semanticColors=a.theme_color_map,a.semanticColors.CHAT_BACKGROUND=a?.background?.url?["transparent","transparent"]:a.theme_color_map.BACKGROUND_PRIMARY),a.colours&&(a.rawColors=a.colours,Object.entries(a.colours).forEach(([e,t])=>{e.startsWith("PRIMARY_DARK")&&(a.rawColors[e.replace("PRIMARY_DARK","PRIMARY")]=t),e.startsWith("PRIMARY_LIGHT")&&(a.rawColors[e.replace("PRIMARY_LIGHT","PRIMARY")]=t),e.startsWith("BRAND_NEW")&&(a.rawColors[e.replace("BRAND_NEW","BRAND")]=t),e.startsWith("STATUS")&&(a.rawColors[e.replace("STATUS_","")]=t)}))),a.rawColors&&Object.entries(a.rawColors).forEach(([e,n])=>{t.RawColor[e]=n,t.default.unsafe_rawColors[e]=n}),a.semanticColors){var o=t.default.meta.resolveSemanticColor;t.default.meta.resolveSemanticColor=(e,t)=>{var n=t[Object.getOwnPropertySymbols(t)[0]];if(a.semanticColors[n]){var r={dark:0,light:1,amoled:2}[e.toLowerCase()]||0,i=a.semanticColors[n][r];if(i)return i}return o(e,t)}}return"break"}catch(e){console.error(Error(`[Enmity] ${e}`).stack)}},common={},blacklist=[],filters={byProps:(...e)=>{if(e.length>1)return t=>{for(var n=0,r=e.length;n<r;n++)if(void 0===t[e[n]])return!1;return!0};var t=e[0];return e=>void 0!==e[t]},byName:(e,t=!0)=>n=>!!n&&(t?"function"==typeof n&&n.name===e:"function"==typeof n.default&&n.default.name===e),byTypeName:(e,t=!0)=>n=>!!n&&(t?"function"==typeof n.type&&n.type.name===e:"function"==typeof n.default?.type&&n.default.type.name===e),byDisplayName:(e,t=!0)=>n=>!!n&&(t?"function"==typeof n&&n.displayName===e:"function"==typeof n.default&&n.default.displayName===e)};for(var id$1 in modules)if("break"===_loop(id$1))break;var getters=[];Object.entries(modules$1).map(([e,t])=>{if(t.multiple)Object.entries(t.props).map(([t,n])=>{getters.push({id:t,filter:e=>filters.byProps(...n)(e),submodule:e})});else if(t.props){if(t.props.every(e=>Array.isArray(e))){var n=[];getters.push({id:e,filter:e=>{var r=t.props.some(t=>t.every(t=>e[t]));return(!r||!t.ensure||!!t.ensure(e))&&(r&&n.push(e),r)},map:Object.assign({},...n)})}else getters.push({id:e,filter:e=>{var n=filters.byProps(...t.props)(e);return(!n||!t.ensure||!1!==t.ensure(e))&&n},map:t.export})}else t.displayName?getters.push({id:e,filter:filters.byDisplayName(t.displayName,t.default),map:t.export}):t.name?getters.push({id:e,filter:filters.byName(t.name,t.default),map:t.export}):t.filter&&getters.push({id:e,filter:t.filter,map:t.export})});var results=bulk(...getters.map(({filter:e})=>e));function getModule(e,{all:t=!1,traverse:n=!1,defaultExport:r=!0}={}){if("function"!=typeof e)return null;var a=[],o=function(t,n){try{return e(t,n)}catch{return!1}};for(var i in modules)if(!blacklist.includes(i)){var s=common.Moment?.locale();if(!modules[i].isInitialized)try{__r(i)}catch(e){blacklist.push(i);continue}var l=common.Moment?.locale(),c=common.Locale?.getLocale();if(common.Moment&&common.Locale&&l!==c&&(common.Moment.locale(c),s&&l&&s!==l)){blacklist.push(i);continue}var u=modules[i].publicModule.exports;if(!u||u===window||null===u.ihateproxies){blacklist.push(i);continue}if("object"==typeof u){if(o(u,i)){if(!t)return u;a.push(u)}if(u.default&&o(u.default,i)){var m=r?u.default:u;if(!t)return m;a.push(m)}if(n&&u.__esModule){for(var d in u)if(void 0!==u[d]&&o(u[d],i)){if(!t)return u[d];a.push(u[d])}}}else if("function"==typeof u){if(!o(u,i))continue;if(!t)return u;a.push(u)}}return t?a:a[0]}function getModules(e){return getModule(e,{all:!0})}function bulk(...e){var t=Array(e.length),n=e.map(e=>t=>{try{return e(t)}catch{return!1}});return getModule(r=>{for(var a=0;a<n.length;a++){var o=n[a];"function"==typeof o&&o(r)&&null==t[a]&&(t[a]=r)}return t.filter(String).length===e.length}),t}function getByProps(...e){var[t,{bulk:n=!1,...r}]=parseOptions(e);return n?bulk(...t.map(e=>Array.isArray(e)?filters.byProps(...e):filters.byProps(e)).concat({...r})):getModule(filters.byProps(...t),r)}function getByDisplayName(...e){var[t,{bulk:n=!1,default:r=!0,...a}]=parseOptions(e);return n?bulk(...t.map(filters.byDisplayName).concat({defaultExport:r,...a})):getModule(filters.byDisplayName(t[0]),{defaultExport:r,...a})}function getByTypeName(...e){var[t,{bulk:n=!1,default:r=!0,...a}]=parseOptions(e);return n?bulk(...t.map(filters.byTypeName).concat({defaultExport:r,...a})):getModule(filters.byTypeName(t[0]),{defaultExport:r,...a})}function getByName$1(...e){var[t,{bulk:n=!1,default:r=!0,...a}]=parseOptions(e);return n?bulk(...t.map(filters.byName).concat({defaultExport:r,...a})):getModule(filters.byName(t[0]),{defaultExport:r,...a})}function getByKeyword(...e){var[[t],{caseSensitive:n=!1,all:r=!1,...a}]=parseOptions(e);return getModule(e=>{for(var r=[...Object.keys(e),...Object.keys(e.__proto__)],a=0;a<r.length;a++){var o=r[a];if(n){if(~o.indexOf(t))return!0}else{var i=t.toLowerCase();if(~o.toLowerCase().indexOf(i))return!0}}return!1},{all:r,...a})}function parseOptions(e,t=e=>"object"==typeof e&&!Array.isArray(e)){return[e,t(e[e.length-1])?e.pop():{}]}getters.map(({id:e,map:t,submodule:n},r)=>{var a=e=>e;if("string"==typeof t)a=e=>e[t];else if(Array.isArray(t)){var o={};a=e=>{for(var n of t)o[n]=e[n];return o}}if(results[r]){var i=a(results[r]);n?(common[n]??={},common[n][e]=i):common[e]=i}});var Modules=Object.freeze({__proto__:null,blacklist:blacklist,bulk:bulk,common:common,filters:filters,getByDisplayName:getByDisplayName,getByKeyword:getByKeyword,getByName:getByName$1,getByProps:getByProps,getByTypeName:getByTypeName,getModule:getModule,getModules:getModules}),{Clipboard,Assets:Assets$3,Messages,Clyde:Clyde$1,Avatars,Native:Native$1,Dispatcher,Storage,AsyncUsers,Toasts,Dialog,Token,REST,Settings:Settings$2,Users,Theme,Linking,StyleSheet:StyleSheet$1,ColorMap,Components:Components$1,Locale,Constants,Profiles,Logger:Logger$1,Lodash,Flux,SVG,Scenes,Navigation,NavigationNative,NavigationStack,Moment}=common;Constants.ThemeColorMap=ColorMap?.colors,Constants.Colors=ColorMap?.unsafe_rawColors,ColorMap.ThemeColorMap=ColorMap?.colors,StyleSheet$1.ThemeColorMap=ColorMap?.colors,common.React,function(e){e.Before="before",e.Instead="instead",e.After="after"}(Type||(Type={}));var patches=[];function getPatchesByCaller(e){if(!e)return[];var t=[];for(var n of patches)for(var r of[...n.patches.before,...n.patches.instead,...n.patches.after])r.caller===e&&t.push(r);return t}function unpatchAll(e){var t=getPatchesByCaller(e);if(t.length)for(var n of t)n.unpatch()}function override(e){return function(){if(!e?.patches?.before.length&&!e?.patches?.after.length&&!e?.patches?.instead.length&&!patches.find(t=>t.mdl===e.mdl&&t.func===e.func))return e.unpatch(),new.target?new e.original(...arguments):e.original.apply(this,arguments);for(var t,n=arguments,r=[...e.patches.before],a=0;a<r.length;a++){var o=r[a];if(o)try{var i=o.callback(this,n,e.original.bind(this));Array.isArray(i)&&(n=i),o.once&&o.unpatch()}catch(t){console.error(`Could not fire before patch for ${e.func} of ${o.caller}`,t)}}var s=[...e.patches.instead];if(s.length)for(var l=0;l<s.length;l++){var c=s[l];if(c)try{var u=c.callback(this,n,e.original.bind(this));void 0!==u&&(t=u),c.once&&c.unpatch()}catch(t){console.error(`Could not fire instead patch for ${e.func} of ${c.caller}`,t)}}else t=new.target?new e.original(...n):e.original.apply(this,n);for(var m=[...e.patches.after],d=0;d<m.length;d++){var p=m[d];if(p)try{var g=p.callback(this,n,t,e=>t=e);void 0!==g&&(t=g),p.once&&p.unpatch()}catch(t){console.error(`Could not fire after patch for ${e.func} of ${p.caller}`,t)}}return t}}function push(e,t){var n={mdl:e,func:t,original:e[t],unpatch:()=>{n.mdl[n.func]=n.original,n.patches={before:[],after:[],instead:[]}},patches:{before:[],after:[],instead:[]}},r=override(n);e[t]=r;var a=Object.getOwnPropertyDescriptors(n.original);return delete a.length,Object.defineProperties(e[t],{...a,toString:{value:()=>n.original.toString(),configurable:!0,enumerable:!1},__original:{value:n.original,configurable:!0,enumerable:!1}}),patches.push(n),n}function get$2(e,t){return patches.find(n=>n.mdl===e&&n.func===t)||push(e,t)}function patch(e,t,n,r,a=Type.After,o=!1){if(e&&"string"==typeof e){if(t&&["function","object"].includes(typeof t)){if(n&&"string"==typeof n){if(r&&"function"==typeof r){if(a&&"string"==typeof a&&["after","before","instead"].includes(a)){if(void 0===t[n])throw ReferenceError(`function ${n} does not exist on the second argument (object or function)`)}else throw TypeError('fifth argument "type" must be of type string and any of the three: after, before, instead')}else throw TypeError('fourth argument "callback" must be of type function')}else throw TypeError('third argument "func" must be of type string')}else throw TypeError('second argument "mdl" must be of type function or object')}else throw TypeError('first argument "caller" must be of type string');var i=get$2(t,n),s={caller:e,once:o,type:a,id:i.patches?.[a]?.length??0,callback:r,unpatch:()=>{var e=i.patches?.[a].findIndex(e=>e.id===s.id);if(~e&&i.patches?.[a].splice(e,1),!i.patches?.before.length&&!i.patches?.after.length&&!i.patches?.instead.length){var r=patches.findIndex(e=>e.mdl==t&&e.func==n);r&&(patches[r]?.unpatch(),patches.splice(r,1))}}};return i.patches[a]??=[],i.patches[a].push(s),s.unpatch}function before(e,t,n,r,a=!1){return patch(e,t,n,r,Type.Before,a)}function instead(e,t,n,r,a=!1){return patch(e,t,n,r,Type.Instead,a)}function after(e,t,n,r,a=!1){return patch(e,t,n,r,Type.After,a)}function create(e){return{getPatchesByCaller,before:(t,n,r,a=!1)=>before(e,t,n,r,a),instead:(t,n,r,a=!1)=>instead(e,t,n,r,a),after:(t,n,r,a=!1)=>after(e,t,n,r,a),unpatchAll:()=>unpatchAll(e)}}var Patcher$4={create,before,instead,after,unpatchAll,patches},Patcher$5=Object.freeze({__proto__:null,get Type(){return Type},after:after,before:before,create:create,default:Patcher$4,instead:instead,patches:patches,unpatchAll:unpatchAll}),assets={};try{Patcher$4.after("enmity-assets",Assets$3,"registerAsset",(e,[t],n)=>{assets[t.name]=Object.assign(t,{id:n})});for(var id=1;;id++){var asset=Assets$3.getAssetByID(id);if(!asset)break;assets[asset.name]||(assets[asset.name]=Object.assign(asset,{id}))}}catch{}function find(e){return Object.values(assets).find(e)}function getByName(e){return assets[e]}function getByID(e){return Assets$3.getAssetByID(e)}function getIDByName(e){return assets[e]?.id}var Icons$1=new Proxy({},{get:(e,t)=>getIDByName(t)}),Assets$1={assets,getByName,getByID,getIDByName},Assets$2=Object.freeze({__proto__:null,Icons:Icons$1,assets:assets,default:Assets$1,find:find,getByID:getByID,getByName:getByName,getIDByName:getIDByName}),settings=Settings$2.get("enmity")??{};function getSetting(e,t,n){return settings[e]?.[t]??n}function get$1(e){return settings[e]??{}}function getAll(){return settings}var Events$2={ENMITY_GET_SETTING:({file:e,setting:t,defaults:n})=>settings[e][t]??n,ENMITY_SET_SETTING:({file:e,setting:t,value:n})=>{settings[e]||(settings[e]={}),void 0==n?delete settings[e][t]:settings[e][t]=n},ENMITY_TOGGLE_SETTING:({file:e,setting:t,defaults:n})=>{settings[e]||(settings[e]={}),void 0===settings[e][t]?settings[e][t]=!Boolean(n):settings[e][t]=!Boolean(settings[e][t])}},store=new Flux.Store(Dispatcher,Events$2);store.addChangeListener(Lodash.debounce(()=>Settings$2.set({enmity:settings}),200));var Manager={store,getAll,getSetting,get:get$1},React=common.React,listeners={};function ENMITY_SET_SETTING(e){return handleSettingsUpdate({...e,type:"set"})}function ENMITY_TOGGLE_SETTING(e){return handleSettingsUpdate({...e,type:"toggle"})}function handleSettingsUpdate({file:e,type:t,...n}){var r=listeners[e];if(r)for(var a of r.values())a({...n})}function set(e,t,n){if(e&&"string"==typeof e){if(!t||"string"!=typeof t)throw TypeError("the second argument setting must be of type string")}else throw TypeError("the first argument file must be of type string");return Dispatcher.wait(()=>Dispatcher.dispatch({type:"ENMITY_SET_SETTING",file:e,setting:t,value:n}))}function get(e,t,n){if(e&&"string"==typeof e){if(!t||"string"!=typeof t)throw TypeError("the second argument setting must be of type string")}else throw TypeError("the first argument file must be of type string");return Manager.getSetting(e,t,n)}function getBoolean(e,t,n){if(e&&"string"==typeof e){if(t&&"string"==typeof t){if(void 0===n||"boolean"!=typeof n)throw TypeError("the third argument defaults must be of type boolean")}else throw TypeError("the second argument setting must be of type string")}else throw TypeError("the first argument file must be of type string");return Boolean(Manager.getSetting(e,t,n))}function toggle(e,t,n){if(e&&"string"==typeof e){if(t&&"string"==typeof t){if(void 0===n||"boolean"!=typeof n)throw TypeError("the third argument defaults must be of type boolean")}else throw TypeError("the second argument setting must be of type string")}else throw TypeError("the first argument file must be of type string");return Dispatcher.wait(()=>Dispatcher.dispatch({type:"ENMITY_TOGGLE_SETTING",file:e,setting:t,defaults:n}))}function connectComponent(e,t){if(e&&["function","object"].includes(typeof e)){if(!t||"string"!=typeof t)throw TypeError("the second argument file must be of type string")}else throw TypeError("the first argument component must be of type function or object");var n=n=>{var r=React.useState({})[1];return React.useEffect(()=>{function e(){r({})}return subscribe(t,e),()=>unsubscribe(t,e)},[]),React.createElement(e,{...n,settings:makeStore(t)})};return e.displayName&&(n.displayName=e.displayName),e.name&&(n.name=`Connected${e.name}`),n}function makeStore(e){if(!e||"string"!=typeof e)throw TypeError("the first argument file must be of type string");return{settings:Manager.get(e),set:(t,n)=>set(e,t,n),get:(t,n)=>get(e,t,n),toggle:(t,n)=>toggle(e,t,n),getBoolean:(t,n)=>getBoolean(e,t,n)}}function subscribe(e,t){if(e&&"string"==typeof e){if(!t||"function"!=typeof t)throw TypeError("the second argument callback must be of type function")}else throw TypeError("the first argument file must be of type string");listeners[e]??=new Set,listeners[e].add(t)}function unsubscribe(e,t){if(e&&"string"==typeof e){if(!t||"function"!=typeof t)throw TypeError("the second argument callback must be of type function")}else throw TypeError("the first argument file must be of type string");listeners[e]?.delete(t),listeners[e]?.size===0&&delete listeners[e]}function connectStores(e,t){if(e&&["function","object"].includes(typeof e)){if(!t||"string"!=typeof t)throw TypeError("the second argument file must be of type string")}else throw TypeError("the first argument component must be of type function or object");return Flux.connectStores([Manager.store],()=>({settings:makeStore(t)}))(e)}Dispatcher.subscribe("ENMITY_SET_SETTING",ENMITY_SET_SETTING),Dispatcher.subscribe("ENMITY_TOGGLE_SETTING",ENMITY_TOGGLE_SETTING);var Settings={connectComponent,connectStores,unsubscribe,subscribe,makeStore,listeners,toggle,get,set},Settings$1=Object.freeze({__proto__:null,connectComponent:connectComponent,connectStores:connectStores,default:Settings,get:get,getBoolean:getBoolean,listeners:listeners,makeStore:makeStore,set:set,settings:settings,store:store,subscribe:subscribe,toggle:toggle,unsubscribe:unsubscribe}),Logger=getByName$1("Logger"),EnmityLogger=new Logger("Enmity");function connectWebsocket(host){console.log("Connecting to debug WebSocket"),void 0!==socket&&socket.readyState!==WebSocket.CLOSED&&(socket.close(),socket=null);var address=Boolean(Settings.get("enmity","autoConnectWS",!1))&&Settings.get("enmity","debugWSAddress");(address||host)&&(socket=new WebSocket(`ws://${host??address}`),socket.addEventListener("open",()=>{console.log("Connected with debug websocket"),Toasts.open({content:"Connected to the WebSocket server.",source:getIDByName("Check")})}),socket.addEventListener("error",e=>{console.log(`Error with debug websocket: ${e.message}`),Toasts.open({content:"An error occured with the websocket connection.",source:getIDByName("toast_copy_link")})}),socket.addEventListener("close",e=>{console.log(`Error with debug websocket: ${e.message}`),Toasts.open({content:"The websocket connection has been closed.",source:getIDByName("toast_copy_link")})}),socket.addEventListener("message",message=>{try{console.log(eval(message.data))}catch(e){console.error(e)}}))}function initialize$5(){var e=nativeLoggingHook;globalThis.nativeLoggingHook=function(t,n){return socket?.readyState===WebSocket.OPEN&&socket.send(JSON.stringify({level:n,message:t})),EnmityLogger.log(t),e.apply(this,arguments)},Settings.get("enmity","autoConnectWS",!1)&&connectWebsocket()}function sendMessage(e){socket?.readyState===WebSocket.OPEN&&socket.send(e)}var WebSocket$1={initialize:initialize$5,sendMessage,connectWebsocket,socket},{Alert,Button,FlatList,Image,ImageBackground,KeyboardAvoidingView,Modal,Pressable,RefreshControl,ScrollView,SectionList,StatusBar,StyleSheet,Switch,Text,TextInput,TouchableHighlight,TouchableOpacity,TouchableWithoutFeedback,Touchable,View,VirtualizedList}=Components$1.General,{Form,FormArrow,FormCTA,FormCTAButton,FormCardSection,FormCheckbox,FormDivider,FormHint,FormIcon,FormInput,FormLabel,FormRadio,FormRow,FormSection,FormSelect,FormSubLabel,FormSwitch,FormTernaryCheckBox,FormText,FormTextColors,FormTextSizes}=Components$1.Forms,Components=Object.freeze({__proto__:null,Alert:Alert,Button:Button,FlatList:FlatList,Form:Form,FormArrow:FormArrow,FormCTA:FormCTA,FormCTAButton:FormCTAButton,FormCardSection:FormCardSection,FormCheckbox:FormCheckbox,FormDivider:FormDivider,FormHint:FormHint,FormIcon:FormIcon,FormInput:FormInput,FormLabel:FormLabel,FormRadio:FormRadio,FormRow:FormRow,FormSection:FormSection,FormSelect:FormSelect,FormSubLabel:FormSubLabel,FormSwitch:FormSwitch,FormTernaryCheckBox:FormTernaryCheckBox,FormText:FormText,FormTextColors:FormTextColors,FormTextSizes:FormTextSizes,Image:Image,ImageBackground:ImageBackground,KeyboardAvoidingView:KeyboardAvoidingView,Modal:Modal,Pressable:Pressable,RefreshControl:RefreshControl,ScrollView:ScrollView,SectionList:SectionList,StatusBar:StatusBar,StyleSheet:StyleSheet,Switch:Switch,Text:Text,TextInput:TextInput,Touchable:Touchable,TouchableHighlight:TouchableHighlight,TouchableOpacity:TouchableOpacity,TouchableWithoutFeedback:TouchableWithoutFeedback,View:View,VirtualizedList:VirtualizedList});function memoize(e){var t;return(...n)=>t??=e.apply(null,n)}function debounce(e,t){var n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}}function uuid(e=10){var t="";do{var n=16*Math.random()|0;t+=(12==t.length?4:16==t.length?3&n|8:n).toString(16)}while(t.length<e);return t}function createStore(e){var t={...e??{}},n=uuid().toUpperCase(),r={get:(e,n)=>t[e]??n,set:(e,t)=>Dispatcher.wait(()=>Dispatcher.dispatch({type:`ENMITY_FLUX_${n}_SET`,key:e,value:t})),delete:e=>r.set(e,void 0)},a=new Flux.Store(Dispatcher,{[`ENMITY_FLUX_${n}_SET`]:({key:e,value:n})=>{void 0===n?delete t[e]:t[e]=n}});return{...r,store:a,storage:t,id:n}}function findInTree(e={},t=e=>e,{ignore:n=[],walkable:r=[],maxProperties:a=100}={}){for(var o=[e],i=function(...e){try{return Reflect.apply(t,this,e)}catch{return!1}};o.length&&a;){var s=o.shift();if(i(s))return s;if(Array.isArray(s))o.push(...s);else if("object"==typeof s&&null!==s){if(r.length)for(var l in s){var c=s[l];~r.indexOf(l)&&!~n.indexOf(l)&&o.push(c)}else for(var u in s){var m=s[u];s&&~n.indexOf(u)||o.push(m)}}a--}}function findInReactTree(e,t=e=>e,n={}){return findInTree(e,t,{walkable:["props","children"],...n})}var{PixelRatio}=Components$1.General;function normalizeSize(e){return PixelRatio.getPixelSizeForLayoutSize(e)}var overrides={useMemo:e=>e(),useState:e=>[e,()=>void 0],useReducer:e=>[e,()=>void 0],useEffect:()=>{},useLayoutEffect:()=>{},useRef:()=>({current:null}),useCallback:e=>e,useImperativeHandle:()=>{},useContext:e=>e._currentValue},keys=Object.keys(overrides),wrapInHooks=e=>(...t)=>{var n=React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher.current,r=keys.map(e=>[e,n[e]]);Object.assign(n,overrides);var a={rendered:null,error:null};try{a.rendered=e(...t)}catch(e){a.error=e}if(Object.assign(n,Object.fromEntries(r)),a.error)throw a.error;return a.rendered};function sleep(e){return new Promise(t=>setTimeout(t,e))}var Utilities=Object.freeze({__proto__:null,createStore:createStore,debounce:debounce,findInReactTree:findInReactTree,findInTree:findInTree,memoize:memoize,normalizeSize:normalizeSize,sleep:sleep,uuid:uuid,wrapInHooks:wrapInHooks});!function(e){e[e.BuiltIn=0]="BuiltIn",e[e.Guild=1]="Guild",e[e.DM=2]="DM"}(ApplicationCommandSectionType||(ApplicationCommandSectionType={})),function(e){e[e.Chat=1]="Chat",e[e.User=2]="User",e[e.Message=3]="Message"}(ApplicationCommandType||(ApplicationCommandType={})),function(e){e[e.BuiltIn=0]="BuiltIn",e[e.BuiltInText=1]="BuiltInText",e[e.BuiltInIntegration=2]="BuiltInIntegration",e[e.Bot=3]="Bot",e[e.Placeholder=4]="Placeholder"}(ApplicationCommandInputType||(ApplicationCommandInputType={})),function(e){e[e.Role=1]="Role",e[e.User=2]="User"}(ApplicationCommandPermissionType||(ApplicationCommandPermissionType={})),function(e){e[e.SubCommand=1]="SubCommand",e[e.SubCommandGroup=2]="SubCommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionnable=9]="Mentionnable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"}(ApplicationCommandOptionType||(ApplicationCommandOptionType={})),function(e){e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent"}(InteractionTypes||(InteractionTypes={}));var Patcher$3=create("enmity-commands"),[Commands$1,Assets,SearchStore]=bulk(filters.byProps("getBuiltInCommands"),filters.byProps("getApplicationIconURL"),e=>e.default?.getQueryCommands&&e.useDiscoveryState),commands=[],section={id:"enmity",type:1,name:"Enmity",icon:"https://files.enmity.app/icon.png"};try{initialize$4()}catch(e){console.error("Failed to patch commands: ",e.message)}function registerCommands(e,t){if(e&&"string"==typeof e){if(!t||!Array.isArray(t))throw TypeError("second argument cmds must be of type array")}else throw TypeError("first argument caller must be of type string");for(var n in t){var r=t[n];t[n]={displayName:r.name,displayDescription:r.description,type:ApplicationCommandType.Chat,inputType:ApplicationCommandInputType.BuiltIn,id:`enmity-${r.name.replaceAll(" ","-")}`,applicationId:section.id,...r,__enmity:!0,caller:e}}commands.push(...t)}function unregisterCommands(e){if(!e||"string"!=typeof e)throw TypeError("first argument caller must be of type string");commands=commands.filter(t=>t.caller!==e)}function initialize$4(){Commands$1.BUILT_IN_SECTIONS.enmity=section;try{Patcher$3.after(SearchStore.default,"getQueryCommands",(e,[,,t],n)=>{var r=function(e){if(!~e.name?.indexOf(t)||n.some(t=>t.__enmity&&t.id===e.id))return"continue";try{n.unshift(e)}catch{n=[...n,e]}};if(!(!t||t.startsWith("/")))for(var a of(n??=[],commands))r(a)})}catch{console.error("Patching getQueryCommands failed.")}try{Patcher$3.instead(SearchStore.default,"getApplicationSections",(e,t,n)=>{try{var r=n.apply(self,t)??[];return r.find(e=>e.id===section.id)||r.push(section),r}catch{return[]}})}catch{console.error("Patching getApplicationSections failed.")}try{Patcher$3.after(SearchStore,"useDiscoveryState",(e,[,t],n)=>{if(1===t){if(n.sectionDescriptors?.find?.(e=>e.id===section.id)||(n.sectionDescriptors??=[],n.sectionDescriptors.push(section)),n.filteredSectionId&&n.filteredSectionId!==section.id||n.activeSections.find(e=>e.id===section.id)||n.activeSections.push(section),commands.some(e=>!n.commands?.find?.(t=>t.id===e.id))){n.commands??=[];var r=[...n.commands,...commands];n.commands=[...new Set(r).values()]}n.filteredSectionId&&n.filteredSectionId!==section.id||n.commandsByActiveSection.find(e=>e.section.id===section.id)||n.commandsByActiveSection.push({section:section,data:commands});var a=n.commandsByActiveSection.find(e=>e.section.id===section.id);(!n.filteredSectionId||n.filteredSectionId===section.id)&&a&&0===a.data.length&&0!==commands.length&&(a.data=commands);var o=n.sectionDescriptors.filter(e=>"-1"===e.id);o.length>1&&(n.sectionDescriptors=n.sectionDescriptors.filter(e=>"-1"!==e.id),n.sectionDescriptors.push(o.find(e=>"-1"===e.id)))}})}catch{console.error("Patching useDiscoveryState failed.")}try{Patcher$3.after(Assets,"getApplicationIconURL",(e,[t],n)=>{if("enmity"===t.id)return section.icon})}catch{console.error("Patching getApplicationIconURL failed.")}}var Commands$2=Object.freeze({__proto__:null,registerCommands:registerCommands,section:section,unregisterCommands:unregisterCommands}),replies={};function sendCommand(e,t=[],n){var r=uuid();Linking.openURL(`com.hammerandchisel.discord://enmity?id=${r}&command=${e}&params=${t.join(",")}`).then(()=>{n&&(replies[r]=n)})}function asyncGeneratorStep$4(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator$4(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$4(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep$4(o,r,a,i,s,"throw",e)}i(void 0)})}}Linking.addEventListener("url",e=>{var t=e.url;t=decodeURIComponent(t.replace("com.hammerandchisel.discord://",""));try{var n=JSON.parse(t);if(void 0===n.data)return;replies[n.id]&&(replies[n.id](n.data),delete replies[n.id])}catch(e){return}});var EventEmitter$1=getByProps("EventEmitter").EventEmitter,plugins$1=[],enabled=window.plugins?.enabled??[],disabled=window.plugins?.disabled??[],Events$1=new EventEmitter$1;function registerPlugin(e){e&&"object"==typeof e&&(e.onEnable=()=>{try{e.onStart(),e.commands&&registerCommands(e.name,e.commands),console.log(`${e.name} has been enabled`)}catch(t){console.log(`${e.name} failed to load`,t.message)}},e.onDisable=()=>{try{if(e.patches)for(var t of e.patches)t.unpatchAll();e.commands&&unregisterCommands(e.name),e.onStop(),console.log(`${e.name} has been disabled`)}catch(t){console.log(`${e.name} failed to disable`,t.message)}},enabled.includes(e.name)&&e.onEnable(),disabled.includes(e.name)&&e.onDisable(),getPlugin(e.name)||plugins$1.push(e))}var on$1=Events$1.on.bind(Events$1),once$1=Events$1.once.bind(Events$1),off$1=Events$1.off.bind(Events$1);function getPlugin(e){return plugins$1.find(t=>t.name===e)}function getPlugins(){return plugins$1}function getEnabledPlugins(){return enabled}function getDisabledPlugins(){return disabled}function disablePlugin$1(e,t=!1,n){if(enabled.includes(e)){var r=enabled.indexOf(e);~r&&enabled.splice(r,1)}if(t&&disabled.includes(e)){var a=disabled.indexOf(e);~a&&disabled.splice(a,1)}return t||disabled.push(e),getPlugin(e).onDisable(),new Promise(t=>{sendCommand("disable-plugin",[e],(...e)=>{n&&n(...e),t(...e)})})}function enablePlugin(e,t){if(disabled.includes(e)){var n=disabled.indexOf(e);~n&&disabled.splice(n,1)}return enabled.push(e),getPlugin(e).onEnable(),new Promise(n=>{sendCommand("enable-plugin",[e],(...e)=>{t&&t(...e),n(...e)})})}function evalPlugin(e){return _evalPlugin.apply(this,arguments)}function _evalPlugin(){return(_evalPlugin=_asyncToGenerator$4(function*(url,enable=!1,update){try{var response=yield REST.get(url),code=response.text,name=url.split("/").pop().split(".")[0],id=Number(Object.keys(window.modules).pop())+1,wrapper=`__d(function(...args) {
        try {
          ${code}
        } catch(err) {
          console.log(err);
        }
      }, ${id}, []);
      __r(${id})`;try{eval(wrapper),enable&&!enabled.includes(name)&&(yield enablePlugin(name))}catch(e){console.log("Failed to eval plugin instance",e.message)}return update&&update(),name}catch(e){console.log("Failed to eval plugin instance",e.message)}})).apply(this,arguments)}function installPlugin(e,t,n){var r=e.split("/").pop().split(".")[0];return new Promise(a=>{sendCommand("install-plugin",[e],o=>{function i(){evalPlugin(e,!0).then(r=>{var i={name:r,data:o,url:e};Events$1.emit("installed"),t&&t(i),n(),a(i)})}return"overridden_plugin"===o?disablePlugin$1(r,!0).then(i):i()})})}function uninstallPlugin(e,t){return new Promise(n=>{disablePlugin$1(e),sendCommand("uninstall-plugin",[e],r=>{enabled=enabled.filter(t=>t!==e),disabled=disabled.filter(t=>t!==e);var a=plugins$1.findIndex(t=>t.name===e);a>-1&&plugins$1.splice(a,1),Events$1.emit("uninstalled"),t&&t(r),n(r)})})}var Plugins=Object.freeze({__proto__:null,disablePlugin:disablePlugin$1,enablePlugin:enablePlugin,evalPlugin:evalPlugin,getDisabledPlugins:getDisabledPlugins,getEnabledPlugins:getEnabledPlugins,getPlugin:getPlugin,getPlugins:getPlugins,installPlugin:installPlugin,off:off$1,on:on$1,once:once$1,registerPlugin:registerPlugin,uninstallPlugin:uninstallPlugin}),{colors:colors$5}=ColorMap;function Authors({authors:e}){if(!e||!Array.isArray(e)||!e.length)return null;var t=StyleSheet$1.createThemedStyleSheet({linkless:{color:colors$5.HEADER_SECONDARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,display:"flex",fontSize:16,alignItems:"center",alignSelf:"center",justifyContent:"center"},link:{color:colors$5.HEADER_PRIMARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,display:"flex",alignItems:"center",fontSize:16,alignSelf:"center",justifyContent:"center"}});return React.createElement(View,{style:t.container},e.map((n,r)=>{var a=r!==e.length-1;return"string"==typeof n?React.createElement(Text,{style:t.linkless},n,a&&","):"object"==typeof n&&n.name&&!n.id?React.createElement(Text,{style:t.linkless},n.name,a&&","):"object"==typeof n&&n.name&&n.id?React.createElement(TouchableOpacity,{key:n.id,onPress:()=>{Users.getUser(n.id)?Profiles.showUserProfile({userId:n.id}):AsyncUsers.fetchProfile(n.id).then(()=>{Profiles.showUserProfile({userId:n.id})})}},React.createElement(Text,{style:t.link},n.name,a&&",")):null}).filter(Boolean))}function asyncGeneratorStep$3(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator$3(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$3(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep$3(o,r,a,i,s,"throw",e)}i(void 0)})}}var{createThemedStyleSheet:createThemedStyleSheet$1}=StyleSheet$1,{colors:colors$4}=ColorMap;function PluginCard({plugin:e}){var t=getEnabledPlugins(),[n,r]=React.useState(t.includes(e.name)),a=NavigationNative.useNavigation(),o=StyleSheet$1.createThemedStyleSheet({container:{backgroundColor:colors$4.BACKGROUND_FLOATING,borderRadius:5,borderLeftColor:e.color??"#524FBF",borderLeftWidth:5,marginBottom:15},name:{color:colors$4.HEADER_PRIMARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,fontSize:16},version:{color:colors$4.HEADER_SECONDARY,fontSize:16,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5},content:{height:"auto",paddingBottom:10,paddingLeft:10,paddingRight:10},actions:{justifyContent:"flex-end",flexDirection:"row",alignItems:"center"},description:{color:colors$4.HEADER_SECONDARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD},info:{marginLeft:-6,flexDirection:"row",alignItems:"center",flexWrap:"wrap",width:"100%"},delete:{marginRight:7.5},trashIcon:{width:22,height:22,tintColor:colors$4.INTERACTIVE_NORMAL},settingsIcon:{width:22,height:22,tintColor:colors$4.INTERACTIVE_NORMAL}}),i=e.getSettingsPanel;return React.createElement(View,{style:o.container},React.createElement(View,null,React.createElement(FormRow,{label:()=>React.createElement(View,{style:o.info},React.createElement(Text,{adjustsFontSizeToFit:!0,style:o.name},e.name),e.version&&React.createElement(Text,{adjustsFontSizeToFit:!0,style:o.version},e.version," ",e.authors&&"by"),React.createElement(Authors,{authors:e.authors})),trailing:()=>React.createElement(View,{style:o.actions},i&&React.createElement(TouchableOpacity,{style:o.delete,onPress:()=>{a.push("EnmityCustomPage",{pageName:e.name,pagePanel:connectComponent(i,e.name)})}},React.createElement(Image,{style:o.settingsIcon,source:Assets$1.getIDByName("settings")})),React.createElement(TouchableOpacity,{style:o.delete,onPress:()=>void uninstallPlugin(e.name)},React.createElement(Image,{style:o.trashIcon,source:Assets$1.getIDByName("ic_trash_filled_16px")})),React.createElement(FormSwitch,{value:n,onValueChange:t=>{r(t),Toasts.open({content:`${e.name} has been ${t?"enabled":"disabled"}.`}),t?enablePlugin(e.name):disablePlugin$1(e.name)}}))})),React.createElement(View,{style:o.content},React.createElement(Text,{style:o.description},e.description??"No description provided.")))}function HeaderRight$1(){var e=createThemedStyleSheet$1({header:{tintColor:colors$4.HEADER_PRIMARY,marginRight:15,width:18,height:18},wrapper:{marginRight:15,width:32,height:32}});return React.createElement(TouchableOpacity,{styles:e.wrapper,onPress:_asyncToGenerator$3(function*(){var e=yield Clipboard.getString();Alert.prompt("Install a plugin","Please enter the URL of the plugin to install.",e=>{if(!e.endsWith("js"))return Toasts.open({content:"Invalid URL for plugin",source:Assets$1.getIDByName("ic_close_16px")});installPlugin(e,({data:e})=>{var t={icon:null,text:null};switch(e){case"fucky_wucky":t.text="Failed plugin installation.",t.icon=Assets$1.getIDByName("ic_close_16px");break;case"installed_plugin":t.text="Plugin has been installed.",t.icon=Assets$1.getIDByName("Check");break;case"overridden_plugin":t.text="Plugin has been overriden.",t.icon=Assets$1.getIDByName("Check")}Toasts.open({content:t.text,source:t.icon})})},void 0,e.endsWith(".js")?e:null)})},React.createElement(Image,{style:e.header,source:Assets$1.getIDByName("add_white")}))}var Search$1=getModule(e=>"StaticSearchBarContainer"===e.name);function Page$2(){var e=React.useState(null)[1],[t,n]=React.useState(getPlugins().sort((e,t)=>e.name.localeCompare(t.name))),[r,a]=React.useState(!1),[o,i]=React.useState(null);React.useEffect(()=>{function t(){e({})}return on$1("installed",t),on$1("uninstalled",t),()=>{off$1("installed",t),off$1("uninstalled",t)}},[]);var s=o?t.filter(e=>!!(e.name.toLowerCase().includes(o.toLowerCase())||e.description?.toLowerCase().includes(o.toLowerCase())||e.authors?.find?.(e=>(e.name??e).toLowerCase().includes(o.toLowerCase())))):t,l=createThemedStyleSheet$1({container:{flex:1,padding:5},notFound:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",marginTop:"50%"},notFoundText:{marginTop:10,color:colors$4.TEXT_MUTED,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,textAlign:"center"},search:{margin:0,marginBottom:0,paddingBottom:5,paddingRight:10,paddingLeft:10,backgroundColor:"none",borderBottomWidth:0,background:"none"}});return React.createElement(React.Fragment,null,React.createElement(Search$1,{style:l.search,placeholder:"Search plugins...",onChangeText:e=>i(e)}),React.createElement(View,{style:l.container},React.createElement(ScrollView,{style:l.container,refreshControl:React.createElement(RefreshControl,{refreshing:r,onRefresh:()=>{a(!0),n(getPlugins()),a(!1)}})},s.length?React.createElement(FlatList,{data:s,renderItem:({item:e})=>React.createElement(PluginCard,{plugin:e}),keyExtractor:e=>e.name}):o?React.createElement(View,{style:l.notFound},React.createElement(Image,{source:Assets$1.getIDByName("img_no_results_dark")}),React.createElement(Text,{style:l.notFoundText},"We searched far and wide."),React.createElement(Text,{style:{...l.notFoundText,marginTop:0}},"Unfortunately, no results were found.")):React.createElement(View,{style:l.notFound},React.createElement(Image,{source:Assets$1.getIDByName("img_connection_empty_dark")}),React.createElement(Text,{style:l.notFoundText},"You don't have any plugins."),React.createElement(Text,{style:{...l.notFoundText,marginTop:0}},"Install some by clicking the + icon!")))))}function asyncGeneratorStep$2(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator$2(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$2(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep$2(o,r,a,i,s,"throw",e)}i(void 0)})}}var theme=window.themes?.theme??"",themes$1=window.themes?.list??[],EventEmitter=getByProps("EventEmitter").EventEmitter,Events=new EventEmitter,on=Events.on.bind(Events),once=Events.once.bind(Events),off=Events.off.bind(Events);function getTheme(){return theme}function getThemeByName(e){return themes$1.find(t=>t.name===e)}function listThemes(){return themes$1}function installTheme(e,t){return _installTheme.apply(this,arguments)}function _installTheme(){return(_installTheme=_asyncToGenerator$2(function*(e,t){return new Promise(n=>{sendCommand("install-theme",[e],r=>{REST.get(e).then(a=>{var o=JSON.parse(a.text);if(!o)throw Error("Invalid theme structure");var i=themes$1.findIndex(e=>e.name===o.name);i>-1&&themes$1.splice(i,1),themes$1.push(o);var s={theme:o,url:e,data:r,restart:getTheme()===o.name};t&&t(s),Events.emit("installed"),n(s)})})})})).apply(this,arguments)}function applyTheme(e,t){return new Promise(n=>{sendCommand("apply-theme",[e,Theme.theme],r=>{theme=e,t&&t(r),Events.emit("applied",e),n(r)})})}function removeTheme(e){return new Promise(t=>{sendCommand("remove-theme",[],n=>{theme="",e&&e(n),Events.emit("removed"),t(n)})})}function uninstallTheme(e,t){return _uninstallTheme.apply(this,arguments)}function _uninstallTheme(){return(_uninstallTheme=_asyncToGenerator$2(function*(e,t){return getTheme()===e&&removeTheme(),new Promise(n=>{sendCommand("uninstall-theme",[e],r=>{var a=themes$1.findIndex(t=>t.name===e);a>-1&&themes$1.splice(a,1),Events.emit("uninstalled"),t&&t(r),n(r)})})})).apply(this,arguments)}var Themes=Object.freeze({__proto__:null,applyTheme:applyTheme,getTheme:getTheme,getThemeByName:getThemeByName,installTheme:installTheme,listThemes:listThemes,off:off,on:on,once:once,removeTheme:removeTheme,uninstallTheme:uninstallTheme}),bundle=Native$1.InfoDictionaryManager.Identifier,reload=Native$1.BundleUpdaterManager.reload,version=Native$1.InfoDictionaryManager.Version,os=Native$1.DCDDeviceManager.systemVersion,build=Native$1.InfoDictionaryManager.Build,device=Native$1.DCDDeviceManager.device,Native=Object.freeze({__proto__:null,build:build,bundle:bundle,device:device,os:os,reload:reload,version:version});function asyncGeneratorStep$1(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator$1(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep$1(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep$1(o,r,a,i,s,"throw",e)}i(void 0)})}}var{createThemedStyleSheet}=StyleSheet$1,{colors:colors$3}=ColorMap;function ThemeCard({theme:e}){var t=getTheme(),[n,r]=React.useState(t===e.name),a=StyleSheet$1.createThemedStyleSheet({container:{backgroundColor:colors$3.BACKGROUND_FLOATING,borderRadius:5,borderLeftColor:e.color??"#524FBF",borderLeftWidth:5,marginBottom:15},name:{color:colors$3.HEADER_PRIMARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,fontSize:16},version:{color:colors$3.HEADER_SECONDARY,fontSize:16,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,marginLeft:2.5,marginRight:2.5},content:{height:"auto",paddingBottom:10,paddingLeft:10,paddingRight:10},actions:{justifyContent:"flex-end",flexDirection:"row",alignItems:"center"},description:{color:colors$3.HEADER_SECONDARY,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD},info:{marginLeft:-6,flexDirection:"row",alignItems:"center",flexWrap:"wrap",width:"100%"},delete:{marginRight:7.5},trashIcon:{width:22,height:22,tintColor:colors$3.INTERACTIVE_NORMAL}});return React.createElement(View,{style:a.container},React.createElement(View,null,React.createElement(FormRow,{label:()=>React.createElement(View,{style:a.info},React.createElement(Text,{adjustsFontSizeToFit:!0,style:a.name},e.name),e.version&&React.createElement(Text,{adjustsFontSizeToFit:!0,style:a.version},e.version," ",e.authors&&"by"),React.createElement(Authors,{authors:e.authors})),trailing:()=>React.createElement(View,{style:a.actions},React.createElement(TouchableOpacity,{style:a.delete,onPress:()=>{uninstallTheme(e.name,()=>{n&&Dialog.show({title:"Theme Uninstalled",body:"Uninstalling the theme you previously had applied requires a restart, would you like to restart Discord to remove the theme?",confirmText:"Yes",cancelText:"No",onConfirm:reload})})}},React.createElement(Image,{style:a.trashIcon,source:Assets$1.getIDByName("ic_trash_filled_16px")})),React.createElement(FormSwitch,{value:n,onValueChange:t=>{r(t),Toasts.open({content:`${e.name} has been ${t?"enabled":"disabled"}.`}),t?(applyTheme(e.name),Dialog.show({title:"Theme Applied",body:"Applying a theme requires a restart, would you like to restart Discord to apply the theme?",confirmText:"Yes",cancelText:"No",onConfirm:reload})):(removeTheme(),Dialog.show({title:"Theme Removed",body:"Removing the applied theme requires a restart, would you like to restart Discord to remove the applied theme?",confirmText:"Yes",cancelText:"No",onConfirm:reload}))}}))})),React.createElement(View,{style:a.content},React.createElement(Text,{style:a.description},e.description??"No description provided.")))}function HeaderRight(){var e=createThemedStyleSheet({header:{tintColor:colors$3.HEADER_PRIMARY,marginRight:15,width:18,height:18},wrapper:{marginRight:15,width:32,height:32}});return React.createElement(TouchableOpacity,{styles:e.wrapper,onPress:_asyncToGenerator$1(function*(){var e=yield Clipboard.getString();Alert.prompt("Install a theme","Please enter the URL of a theme to install.",e=>{if(!e.endsWith("json"))return Toasts.open({content:"Invalid URL for theme",source:Assets$1.getIDByName("ic_close_16px")});try{installTheme(e,({data:e,restart:t})=>{var n={icon:null,text:null,restart:!1};switch(e){case"fucky_wucky":n.text="Failed theme installation.",n.icon=Assets$1.getIDByName("ic_close_16px");break;case"installed_theme":n.text="Theme has been installed.",n.icon=Assets$1.getIDByName("Check"),n.restart=t;break;case"overridden_theme":n.text="Theme has been overriden.",n.icon=Assets$1.getIDByName("Check"),n.restart=t}if(Toasts.open({content:n.text,source:n.icon}),n.restart)return Dialog.show({title:"Theme Replaced",body:"Replacing the theme you previously had applied requires a restart, would you like to restart Discord to reload the theme values?",confirmText:"Yes",cancelText:"No",onConfirm:reload})})}catch(e){Toasts.open({content:e.message})}},void 0,e.endsWith(".js")?e:null)})},React.createElement(Image,{style:e.header,source:Assets$1.getIDByName("add_white")}))}var Search=getModule(e=>"StaticSearchBarContainer"===e.name);function Page$1(){var e=React.useState(null)[1],[t,n]=React.useState(listThemes().sort((e,t)=>e.name.localeCompare(t.name))),[r,a]=React.useState(!1),[o,i]=React.useState(null);React.useEffect(()=>{function t(){e({})}return on("installed",t),on("uninstalled",t),()=>{off("installed",t),off("uninstalled",t)}},[]);var s=o?t.filter(e=>!!(e.name.toLowerCase().includes(o.toLowerCase())||e.description?.toLowerCase().includes(o.toLowerCase())||e.authors?.find?.(e=>(e.name??e).toLowerCase().includes(o.toLowerCase())))):t,l=createThemedStyleSheet({container:{flex:1,padding:5},notFound:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",marginTop:"50%"},notFoundText:{marginTop:10,color:colors$3.TEXT_MUTED,fontFamily:Constants.Fonts.PRIMARY_SEMIBOLD,textAlign:"center"},search:{margin:0,marginBottom:0,paddingBottom:5,paddingRight:10,paddingLeft:10,backgroundColor:"none",borderBottomWidth:0,background:"none"}});return React.createElement(React.Fragment,null,React.createElement(Search,{style:l.search,placeholder:"Search themes...",onChangeText:e=>i(e)}),React.createElement(View,{style:l.container},React.createElement(ScrollView,{style:l.container,refreshControl:React.createElement(RefreshControl,{refreshing:r,onRefresh:()=>{a(!0),n(listThemes()),a(!1)}})},s.length?React.createElement(FlatList,{data:s,renderItem:({item:e})=>React.createElement(ThemeCard,{theme:e}),keyExtractor:e=>e.name}):o?React.createElement(View,{style:l.notFound},React.createElement(Image,{source:Assets$1.getIDByName("img_no_results_dark")}),React.createElement(Text,{style:l.notFoundText},"We searched far and wide."),React.createElement(Text,{style:{...l.notFoundText,marginTop:0}},"Unfortunately, no results were found.")):React.createElement(View,{style:l.notFound},React.createElement(Image,{source:Assets$1.getIDByName("img_connection_empty_dark")}),React.createElement(Text,{style:l.notFoundText},"You don't have any themes."),React.createElement(Text,{style:{...l.notFoundText,marginTop:0}},"Install some by clicking the + icon!")))))}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var{colors:colors$2}=ColorMap;function PluginIcon({height:e,width:t,...n}){var r=StyleSheet$1.createThemedStyleSheet({icon:{color:colors$2.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return React.createElement(SVG.Svg,_extends$1({viewBox:"0 0 24 24",style:{height:e,width:t,...r.icon},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var{colors:colors$1}=ColorMap;function ThemeIcon({height:e,width:t,...n}){var r=StyleSheet$1.createThemedStyleSheet({icon:{color:colors$1.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});return React.createElement(SVG.Svg,_extends({viewBox:"0 0 24 24",style:{height:e,width:t,...r.icon},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}try{var{colors}=ColorMap;throw Error(colors)}catch(e){console.error(Error(e))}var{colors:colors1}=ColorMap,styles=StyleSheet$1.createThemedStyleSheet({debugText:{color:colors1.TEXT_MUTED},container:{marginBottom:50}}),Invites=getByProps("acceptInviteAndTransitionToInviteChannel");function Page({settings:e}){var t={Twitter:getIDByName("img_account_sync_twitter_white"),GitHub:getIDByName("img_account_sync_github_white"),Addon:getIDByName("img_nitro_increase_guild_limit"),Checkmark:getIDByName("Check"),Discord:getIDByName("Discord"),Refresh:getIDByName("ic_sync_24px"),Hammer:getIDByName("ic_hammer_and_chisel_24px"),Server:getIDByName("ic_server_security_24px")},n=HermesInternal.getRuntimeProperties(),r=getPlugins().map(e=>e.name),a=listThemes().map(e=>e.name);return React.createElement(ScrollView,null,React.createElement(KeyboardAvoidingView,{enabled:!0,behavior:"position",style:styles.container,keyboardVerticalOffset:100,contentContainerStyle:{backfaceVisibility:"hidden"}},React.createElement(FormSection,{title:"Links"},React.createElement(FormRow,{label:"Discord Server",leading:React.createElement(FormRow.Icon,{source:t.Discord}),trailing:FormRow.Arrow,onPress:()=>Invites.acceptInviteAndTransitionToInviteChannel({inviteKey:"enmity",context:{location:"Invite Button Embed"},callback:()=>{}})}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"GitHub",leading:React.createElement(FormRow.Icon,{source:t.GitHub}),trailing:FormRow.Arrow,onPress:()=>Linking.openURL("https://github.com/enmity-mod")}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Twitter",leading:React.createElement(FormRow.Icon,{source:t.Twitter}),trailing:FormRow.Arrow,onPress:()=>Linking.openURL("https://twitter.com/EnmityApp")})),React.createElement(FormSection,{title:"Debug"},React.createElement(FormRow,{label:"Installed Plugins",leading:React.createElement(PluginIcon,{width:24,height:24}),trailing:()=>React.createElement(Text,{style:styles.debugText},r.length),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(`**Plugins**: ${r.join(", ")}`)}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Installed Themes",leading:React.createElement(ThemeIcon,{width:24,height:24}),trailing:()=>React.createElement(Text,{style:styles.debugText},a.length),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(`**Themes**: ${a.join(", ")}`)}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Reload Discord",leading:React.createElement(FormRow.Icon,{source:t.Refresh}),onPress:()=>{Dialog.show({title:"Are You Sure?",body:"Are you sure you want to reload the discord app? This might crash your app instead of reloading it.",confirmText:"Yes",cancelText:"No",onConfirm:reload})}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Automatically connect to debug websocket",trailing:React.createElement(FormSwitch,{value:e.getBoolean("autoConnectWS",!1),onValueChange:()=>{e.toggle("autoConnectWS",!1);try{e.get("autoConnectWS",!1)?connectWebsocket():socket.close()}catch{}}})}),e.getBoolean("autoConnectWS",!1)&&React.createElement(React.Fragment,null,React.createElement(FormDivider,null),React.createElement(FormInput,{value:e.get("debugWSAddress","192.168.0.1:9090"),onChange:t=>e.set("debugWSAddress",t),title:"DEBUG IP"}))),React.createElement(FormSection,{title:"Runtime Versions"},React.createElement(FormRow,{label:"Enmity",leading:React.createElement(FormRow.Icon,{source:{uri:"https://files.enmity.app/icon-64.png"}}),trailing:()=>React.createElement(Text,{style:styles.debugText},window.enmity.version),onPress:()=>Linking.openURL(`https://github.com/acquitelol/enmity/commit/${window.enmity.version}`)}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Tweak",leading:React.createElement(FormRow.Icon,{source:getIDByName("ic_settings_white_24px")}),trailing:()=>React.createElement(Text,{style:styles.debugText},window.tweak?.version??"N/A"),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(window.tweak?.version)}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Discord",leading:React.createElement(FormRow.Icon,{source:t.Discord}),trailing:()=>React.createElement(Text,{style:styles.debugText},version),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(version)}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Bytecode",leading:React.createElement(FormRow.Icon,{source:t.Hammer}),trailing:()=>React.createElement(Text,{style:styles.debugText},n["Bytecode Version"]),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(String(n["Bytecode Version"]))}}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Hermes",leading:React.createElement(FormRow.Icon,{source:t.Server}),trailing:()=>React.createElement(Text,{style:styles.debugText},n["OSS Release Version"]),onPress:()=>{Toasts.open({content:"Copied to clipboard",source:t.Checkmark}),Clipboard.setString(n["OSS Release Version"])}}))))}var Patcher$2=create("enmity-settings");function patchSettings(){patchScreens(),patchSettings$1()}function patchScreens(){Patcher$2.after(Scenes,"default",(e,t,n)=>({...n,Enmity:{key:"Enmity",title:"Enmity",render:connectComponent(Page,"enmity")},EnmityPlugins:{key:"EnmityPlugins",title:"Plugins",render:Page$2,headerRight:HeaderRight$1},EnmityThemes:{key:"EnmityThemes",title:"Themes",render:Page$1,headerRight:HeaderRight},EnmityCustomPage:{key:"EnmityCustomPage",title:"Page",render:({pageName:e,pagePanel:t})=>{var n=NavigationNative.useNavigation(),r=t;return React.useEffect(()=>{e&&n.setOptions({title:e})},[]),React.createElement(r,null)}}}))}function patchSettings$1(){var e=getByName$1("UserSettingsOverviewWrapper",{default:!1}),t=Patcher$2.after(e,"default",(e,n,r)=>{var a=findInReactTree(r,e=>e.type?.name==="UserSettingsOverview");Patcher$2.after(a.type.prototype,"render",({props:{navigation:e}},t,n)=>{var{children:r}=n.props,a=[Locale.Messages.BILLING_SETTINGS,Locale.Messages.PREMIUM_SETTINGS],o=r.findIndex(e=>a.includes(e.props.title));r.splice(-1===o?4:o,0,React.createElement(React.Fragment,null,React.createElement(FormSection,{key:"Enmity",title:"Enmity"},React.createElement(FormRow,{label:"General",leading:React.createElement(FormRow.Icon,{source:{uri:"https://files.enmity.app/icon-64.png"}}),trailing:React.createElement(FormArrow,null),onPress:()=>void e.push("Enmity",{navigation:e})}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Plugins",leading:React.createElement(PluginIcon,{width:24,height:24}),trailing:React.createElement(FormArrow,null),onPress:()=>void e.push("EnmityPlugins",{navigation:e})}),React.createElement(FormDivider,null),React.createElement(FormRow,{label:"Themes",leading:React.createElement(ThemeIcon,{width:24,height:24}),trailing:React.createElement(FormArrow,null),onPress:()=>void e.push("EnmityThemes",{navigation:e})}))));var i=r.find(e=>e.props.title===Locale.Messages.SUPPORT),s=i?.props.children;s&&(i.props.children=s.filter(e=>e?.type?.name!=="UploadLogsButton"))}),t()})}var Patcher$1=create("no-track");function patchTracking(){var[e,t,n]=getByProps(["trackWithMetadata"],["AnalyticsActionHandlers"],["encodeProperties","track"],{bulk:!0});try{patchMetadata(e)}catch(e){console.error("Failed to patch metadata",e.message)}try{patchAnalytics(t)}catch(e){console.error("Failed to patch analytics",e.message)}try{patchProperties(n)}catch(e){console.error("Failed to patch properties",e.message)}return Patcher$1.unpatchAll}function patchMetadata(e){Patcher$1.instead(e,"trackWithMetadata",()=>{}),Patcher$1.instead(e,"trackWithGroupMetadata",()=>{})}function patchAnalytics(e){Patcher$1.instead(e.AnalyticsActionHandlers,"handleTrack",()=>{})}function patchProperties(e){Patcher$1.instead(e,"track",()=>{})}var Util=getByProps("inspect"),levels={debug:0,info:1,warn:2,error:3},methods=["error","info","log","warn","trace","debug"],patchConsole=()=>{var e=function(e){console[e].__ORIGINAL__=console[e],console[e]=(...t)=>{for(var n=[],r=0,a=t.length;a>r;r++)n.push("string"==typeof t[r]?t[r]:Util.inspect(t[r]));for(var o="",i=0,s=n.length;s>i;i++)o+=`${n[i]} `;nativeLoggingHook(o,levels[e]??levels.info)}};for(var t of methods)e(t)},BadgesDomain="https://raw.githubusercontent.com/enmity-mod/badges/main/";function asyncGeneratorStep(e,t,n,r,a,o,i){try{var s=e[o](i),l=s.value}catch(e){n(e);return}s.done?t(l):Promise.resolve(l).then(r,a)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var o=e.apply(t,n);function i(e){asyncGeneratorStep(o,r,a,i,s,"next",e)}function s(e){asyncGeneratorStep(o,r,a,i,s,"throw",e)}i(void 0)})}}!function(e){e[e.HOUR=36e5]="HOUR"}(Times||(Times={}));var Patcher=create("badges"),cache={user:{},badges:{}};function patchBadges(){var e=function(e){Patcher.after(e,"default",(t,[{user:n,isEnmity:r,style:a,...o}],i)=>{if(!r){var[s,l]=React.useState([]);React.useEffect(()=>{try{fetchUserBadges(n.id).then(l)}catch(e){console.error(`Failed to request/parse badges for ${n.id}`)}},[]);var c=s.map(e=>makeBadge(e,a));if(!s.length)return i;if(!i&&Number(version)>=151)(i=wrapInHooks(e.default)({user:new Proxy({},{get:(e,t)=>"flags"===t?-1:"hasFlag"===t?()=>!0:n[t]}),isEnmity:!0,...o})).props.children=[],i.props.badges&&(i.props.badges=[]);else if(!i)return c;return i.props.badges?i.props.badges.push(...c):i.props.children.push(...c),i}})};for(var t of getByName$1("ProfileBadges",{all:!0,default:!1}))e(t);return Patcher.unpatchAll}function fetchUserBadges(e){return _fetchUserBadges.apply(this,arguments)}function _fetchUserBadges(){return(_fetchUserBadges=_asyncToGenerator(function*(e){if(cache.user[e]?.date&&Date.now()-cache.user[e].date<Times.HOUR)return cache.user[e].badges;var t=yield fetch(BadgesDomain+e+".json",{headers:{"Cache-Control":"no-cache"}}).then(e=>e.json()).catch(()=>[]);return Array.isArray(t)&&(cache.user[e]={badges:t,date:Date.now()}),t})).apply(this,arguments)}var makeBadge=(e,t)=>{var n={wrapper:{alignItems:"center",flexDirection:"row",justifyContent:"flex-end"}};return React.createElement(View,{enmity:!0,key:e,style:n.wrapper},React.createElement(Badge,{type:e,size:Array.isArray(t)?t.find(e=>e.paddingVertical&&e.paddingHorizontal)?18:24:20,margin:Array.isArray(t)?2:6}))},Badge=({type:e,size:t,margin:n})=>{var[r,a]=React.useState(null);if(React.useEffect(()=>{try{fetchBadge(e).then(a)}catch(t){console.error(`Failed to get badge data for ${e}.`,t.message)}},[]),!r?.url)return null;var o={image:{width:t,height:t,resizeMode:"contain",marginHorizontal:n}},i=r.url[Theme.theme];return React.createElement(TouchableOpacity,{onPress:()=>Toasts.open({content:r.name,source:{uri:i}})},React.createElement(Image,{source:{uri:i},style:o.image}))};function fetchBadge(e){return _fetchBadge.apply(this,arguments)}function _fetchBadge(){return(_fetchBadge=_asyncToGenerator(function*(e){if(cache.badges[e]?.date&&Date.now()-cache.badges[e].date<Times.HOUR)return cache.badges[e].data;var t=yield fetch(BadgesDomain+`data/${e}.json`,{headers:{"Cache-Control":"no-cache"}}).then(e=>e.json()).catch(()=>{});return t?.url&&(cache.badges[e]={data:t,date:Date.now()}),t})).apply(this,arguments)}function initialize$3(){try{patchConsole()}catch(e){console.log("Failed to patch console: ",e.message)}try{patchSettings()}catch(e){console.log("Failed to patch settings: ",e.message)}try{patchTracking()}catch(e){console.log("Failed to patch trackers: ",e.message)}try{patchBadges()}catch(e){console.log("Failed to patch badges: ",e.message)}}var CorePatches={initialize:initialize$3},Channels=getByProps("getLastSelectedChannelId");try{Avatars.BOT_AVATARS.ENMITY="https://github.com/enmity-mod.png"}catch{}function sendReply(e,t,n,r){var a=e??Channels?.getChannelId?.(),o=Clyde$1.createBotMessage({channelId:a,content:""});o.author.username=n??"Enmity",o.author.avatar=r?n:"ENMITY",r&&(Avatars.BOT_AVATARS[n]=r),"string"==typeof t?o.content=t:Object.assign(o,t),Messages.receiveMessage(a,o)}var Clyde=Object.freeze({__proto__:null,sendReply:sendReply}),websocket=[{name:"websocket",description:"Connect to the websocket server",options:[{name:"host",displayName:"host",description:"Host of the debugger",displayDescription:"Host of the debugger",type:ApplicationCommandOptionType.String,required:!0}],execute:([e])=>connectWebsocket(e.value)},{name:"dump",description:"Dump Discord's modules",execute:(e,t)=>{var n=t.channel.id,r=window.modules;function a(e){if("function"==typeof e)return e.name?`[Function: ${e.name}]`:"[Function]";if(Array.isArray(e))return e.map(a);if("object"==typeof e){var t={};for(var n in e)t[n]=a(e[n]);return t}return e}for(var o of Object.keys(r))try{var i=r[o],s={id:o};if(!i.publicModule?.exports)continue;var l=i.publicModule.exports;for(var c of Object.keys(i.publicModule.exports))s[c]=a(l[c]);sendMessage(JSON.stringify(s,null,"	"))}catch(e){console.log(`Couldn't dump module ${o}`),console.log(e)}sendReply(n,"Modules has been dumped.")}}],plugins=[{name:"plugins list",description:"List installed plugins",execute:(e,t)=>{var n=t.channel.id;if(0===getPlugins().length){sendReply(n,"No plugins installed.");return}var r=getEnabledPlugins(),a=getDisabledPlugins(),o="";r.length>0&&(o=`**Enabled plugins (${r.length})**:
> ${r.join(", ")}
`),a.length>0&&(o+=`**Disabled plugins (${a.length})**:
> ${a.join(", ")}`),sendReply(n,o)}},{name:"plugins install",description:"Install a plugin",options:[{name:"url",displayName:"url",description:"The URL of the plugin you'd like to install.",displayDescription:"The URL of the plugin you'd like to install.",required:!0,type:ApplicationCommandOptionType.String}],execute:([e],t)=>{var n=e.value,r=t.channel.id;installPlugin(n,e=>{sendReply(r,e)})}},{name:"plugins uninstall",description:"Uninstall a plugin",options:[{name:"plugin",displayName:"plugin",description:"Plugin name",displayDescription:"Plugin name",type:ApplicationCommandOptionType.String,required:!0}],execute:([e],t)=>{var n=e.value,r=t.channel.id;uninstallPlugin(n,e=>{sendReply(r,e)})}},{name:"plugins disable",description:"Disable a plugin",options:[{name:"plugin",displayName:"plugin",description:"Plugin name",displayDescription:"Plugin name",type:ApplicationCommandOptionType.String,required:!0}],execute:([e],t)=>{var n=e.value,r=t.channel.id;disablePlugin(n,e=>{if("yes"===e){sendReply(r,`**${n}** has been disabled.`);return}sendReply(r,`Error when disabling **${n}**.`)})}},{name:"plugins enable",description:"Enable a plugin",options:[{name:"plugin",displayName:"plugin",description:"Plugin name",displayDescription:"Plugin name",type:ApplicationCommandOptionType.String,required:!0}],execute:(e,t)=>{var n=e[0].value,r=t.channel.id;enablePlugin(n,e=>{if("yes"===e){sendReply(r,`**${n}** has been enabled.`);return}sendReply(r,`Error when enabling **${n}**.`)})}}],themes=[{name:"themes list",description:"List available themes",execute:(e,t)=>{var n=listThemes();if(0===n.length){sendReply(t.channel.id,"No themes installed.");return}sendReply(t.channel.id,`**Installed themes (${n.length})**: ${n.map(e=>e.name).join(", ")}`)}},{name:"themes apply",description:"Apply a theme",options:[{name:"name",displayName:"name",description:"Theme's name",displayDescription:"Theme's name",type:ApplicationCommandOptionType.String,required:!0,choices:listThemes().map(e=>({name:e.name,displayName:e.name,value:e.name}))}],execute:(e,t)=>{var n=e[0].value;getThemeByName(n)||sendReply(t.channel.id,"Theme couldn't be found."),applyTheme(n).then(e=>{sendReply(t.channel.id,e)})}},{name:"themes clear",description:"Remove applied theme",execute:(e,t)=>{removeTheme().then(e=>{sendReply(t.channel.id,e)})}}],Icons={Checkmark:getIDByName("Check")},utils=[{name:"debug",description:"Print out your device information",options:[{name:"silent",displayName:"silent",description:"Prints the debug informations in silent mode. Only you will see them.",displayDescription:"Prints the debug informations in silent mode. Only you will see them.",type:ApplicationCommandOptionType.Boolean,required:!1}],execute:(e,t)=>{var n=e.find(e=>"silent"===e.name)?.value,r=[],a=HermesInternal.getRuntimeProperties();r.push("**Debug Info:**\n"),r.push(`> **Enmity:** ${window.enmity.version}`),r.push(`> **Tweak:** ${window.tweak?.version??"N/A"}`),r.push(`> **Discord:** ${version} (Build ${build})`),r.push(`> **Hermes:** ${a["OSS Release Version"]}`),r.push(`> **Bytecode:** ${a["Bytecode Version"]}`),r.push(`> **Device:** ${device}`),r.push(`> **System:** ${os}`);var o=r.join("\n");return n?(sendReply(t.channel.id,o),{}):{content:o}}},{name:"reload",description:"Reload Discord",execute:reload},{name:"token",description:"Displays your account's token.",options:[{name:"clipboard",displayName:"clipboard",description:"Copy your token directly to the clipboard.",displayDescription:"Copy your token directly to the clipboard.",type:ApplicationCommandOptionType.Boolean,required:!1}],execute:([e={value:!1}],t)=>{sendReply(t.channel.id,["This is your Discord token. It can grant full access to your account, messages and anything else you keep on Discord.","If someone is asking you to give this token to them, they are most likely attempting to get access to your account in a malicious manner","Keep your token safe, and don't share it with **anyone**",Token.getToken()].join("\n")),e.value&&(Clipboard.setString(Token.getToken()),Toasts.open({content:"Token succesfully copied into your clipboard",source:Icons.Checkmark}))}}];function initialize$2(){registerCommands("enmity",[...plugins,...websocket,...utils,...themes])}var Commands={initialize:initialize$2},API={modules:Modules,themer:Themes,patcher:Patcher$5,version:"5d5b1a4",plugins:Plugins,clyde:Clyde,commands:Commands$2,utilities:Utilities,settings:Settings$1,components:Components,native:Native,assets:Assets$2};function initialize$1(){window.enmity=API,Image.prefetch("https://files.enmity.app/icon.png")}var API$1={API,initialize:initialize$1};function initialize(){WebSocket$1.initialize(),API$1.initialize(),CorePatches.initialize(),Commands.initialize(),Settings$2.set({theme_mode:null})}var Core={initialize};try{Core.initialize()}catch(error){alert(`Enmity failed to initialize: ${error.message}`),console.error(error)}
